<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>英文克漏字遊戲</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: #1e1e2e;
    color: #cdd6f4;
    font-family: 'Segoe UI', Arial, sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .card {
    background: #181825;
    border: 1.5px solid #313244;
    border-radius: 18px;
    padding: 36px 32px 28px 32px;
    width: 100%;
    max-width: 600px;
    box-shadow: 0 8px 40px rgba(0,0,0,0.5);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 18px;
  }

  h1 {
    font-size: 1.7rem;
    color: #cba6f7;
    letter-spacing: 2px;
    text-align: center;
    font-weight: 700;
  }

  .score-bar {
    display: flex;
    gap: 24px;
    background: #313244;
    border-radius: 10px;
    padding: 10px 28px;
    font-size: 1rem;
    width: 100%;
    justify-content: center;
  }

  .score-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
  }

  .score-label {
    font-size: 0.72rem;
    color: #a6adc8;
    letter-spacing: 1px;
  }

  .score-value {
    font-size: 1.3rem;
    font-weight: 700;
    color: #cba6f7;
  }

  .meaning-box {
    background: #313244;
    border-radius: 10px;
    padding: 12px 20px;
    font-size: 1rem;
    color: #89dceb;
    width: 100%;
    text-align: center;
    letter-spacing: 0.5px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .word-display {
    display: flex;
    gap: 8px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    min-height: 72px;
  }

  .letter-box {
    width: 52px;
    height: 62px;
    background: #313244;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: 700;
    color: #89dceb;
    border: 2px solid #45475a;
    text-transform: uppercase;
    letter-spacing: 0;
    transition: background 0.2s, border-color 0.2s;
  }

  .letter-box.blank {
    border: 2.5px dashed #cba6f7;
    background: #1e1e2e;
    color: #cba6f7;
    position: relative;
    animation: pulse-blank 1.4s ease-in-out infinite;
  }

  .letter-box.blank .question-mark {
    font-size: 2rem;
    font-weight: 900;
    color: #cba6f7;
    animation: pulse-q 1.4s ease-in-out infinite;
  }

  @keyframes pulse-blank {
    0%, 100% { box-shadow: 0 0 0 0 rgba(203,166,247,0.18); border-color: #cba6f7; }
    50% { box-shadow: 0 0 0 8px rgba(203,166,247,0.08); border-color: #f5c2e7; }
  }

  @keyframes pulse-q {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.1); }
  }

  .letter-box.correct-anim {
    animation: pop-green 0.45s ease forwards;
    background: #264733;
    border-color: #a6e3a1;
    color: #a6e3a1;
  }

  @keyframes pop-green {
    0% { transform: scale(1); }
    40% { transform: scale(1.35); background: #1e6b45; }
    70% { transform: scale(0.92); }
    100% { transform: scale(1); background: #264733; }
  }

  .word-display.shake-anim {
    animation: shake 0.38s ease;
  }

  @keyframes shake {
    0% { transform: translateX(0); }
    15% { transform: translateX(-10px); }
    30% { transform: translateX(10px); }
    45% { transform: translateX(-8px); }
    60% { transform: translateX(8px); }
    75% { transform: translateX(-4px); }
    90% { transform: translateX(4px); }
    100% { transform: translateX(0); }
  }

  .wrong-flash {
    animation: flash-red 0.38s ease;
  }

  @keyframes flash-red {
    0% { border-color: #45475a; }
    30% { border-color: #f38ba8; background: #3d1a24; }
    100% { border-color: #45475a; background: #313244; }
  }

  .position-hint {
    font-size: 0.85rem;
    color: #a6adc8;
    letter-spacing: 1px;
    text-align: center;
  }

  .input-row {
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: center;
    width: 100%;
  }

  #letter-input {
    width: 64px;
    height: 48px;
    background: #313244;
    border: 2px solid #45475a;
    border-radius: 10px;
    color: #cdd6f4;
    font-size: 1.6rem;
    font-weight: 700;
    text-align: center;
    outline: none;
    text-transform: uppercase;
    transition: border-color 0.2s;
    letter-spacing: 2px;
  }

  #letter-input:focus {
    border-color: #89b4fa;
  }

  .btn-row {
    display: flex;
    gap: 12px;
    width: 100%;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    padding: 10px 22px;
    border: none;
    border-radius: 9px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: filter 0.15s, transform 0.1s;
    letter-spacing: 1px;
  }

  .btn:active { transform: scale(0.96); }
  .btn:disabled { opacity: 0.45; cursor: not-allowed; }

  .btn-confirm { background: #89b4fa; color: #1e1e2e; }
  .btn-confirm:hover:not(:disabled) { filter: brightness(1.12); }

  .btn-hint { background: #f38ba8; color: #1e1e2e; }
  .btn-hint:hover:not(:disabled) { filter: brightness(1.1); }

  .btn-next { background: #a6e3a1; color: #1e1e2e; display: none; }
  .btn-next:hover:not(:disabled) { filter: brightness(1.1); }

  .result-msg {
    font-size: 1.05rem;
    font-weight: 700;
    min-height: 28px;
    letter-spacing: 1px;
    text-align: center;
    transition: color 0.2s;
  }

  .result-msg.correct { color: #a6e3a1; }
  .result-msg.wrong { color: #f38ba8; }
  .result-msg.hint { color: #f9e2af; }

  /* Keyboard */
  .keyboard {
    display: flex;
    flex-direction: column;
    gap: 7px;
    align-items: center;
    width: 100%;
    margin-top: 4px;
  }

  .kb-row {
    display: flex;
    gap: 5px;
    justify-content: center;
  }

  .kb-key {
    width: 38px;
    height: 38px;
    background: #313244;
    border: 1.5px solid #45475a;
    border-radius: 7px;
    color: #cdd6f4;
    font-size: 0.92rem;
    font-weight: 700;
    cursor: pointer;
    text-transform: uppercase;
    transition: background 0.18s, border-color 0.18s, color 0.18s;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
  }

  .kb-key:active { transform: scale(0.93); }
  .kb-key:hover:not(.kb-correct):not(.kb-wrong) { background: #45475a; }

  .kb-key.kb-correct {
    background: #264733;
    border-color: #a6e3a1;
    color: #a6e3a1;
    cursor: default;
  }

  .kb-key.kb-wrong {
    background: #3d1a24;
    border-color: #f38ba8;
    color: #f38ba8;
    cursor: default;
  }

  footer {
    margin-top: 18px;
    font-size: 0.82rem;
    color: #6c7086;
    letter-spacing: 1px;
    text-align: center;
  }
</style>
</head>
<body>

<div class="card">
  <h1>英文克漏字遊戲</h1>

  <div class="score-bar">
    <div class="score-item">
      <span class="score-label">分數</span>
      <span class="score-value" id="score-val">0</span>
    </div>
    <div class="score-item">
      <span class="score-label">答對</span>
      <span class="score-value" id="correct-val">0</span>
    </div>
    <div class="score-item">
      <span class="score-label">答題</span>
      <span class="score-value" id="total-val">0</span>
    </div>
  </div>

  <div class="meaning-box" id="meaning-box">讀取中...</div>

  <div class="word-display" id="word-display"></div>

  <div class="position-hint" id="position-hint"></div>

  <div class="input-row">
    <input type="text" id="letter-input" maxlength="1" placeholder="?" autocomplete="off" spellcheck="false">
  </div>

  <div class="btn-row">
    <button class="btn btn-confirm" id="btn-confirm" onclick="submitAnswer()">確認</button>
    <button class="btn btn-hint" id="btn-hint" onclick="useHint()">提示</button>
    <button class="btn btn-next" id="btn-next" onclick="nextQuestion()">下一題</button>
  </div>

  <div class="result-msg" id="result-msg"></div>

  <div class="keyboard" id="keyboard"></div>
</div>

<footer>按 Enter 確認答案 · 點擊字母鍵盤也可輸入</footer>

<script>
const WORDS = [
  ["time","a measured period or moment"],
  ["year","a period of 12 months"],
  ["hand","the part of the arm beyond the wrist"],
  ["part","a piece or section of something"],
  ["home","the place where one lives"],
  ["face","the front of the head"],
  ["name","a word used to identify a person or thing"],
  ["life","the state of being alive"],
  ["line","a long thin mark or boundary"],
  ["back","the rear side of something"],
  ["side","a surface or edge of something"],
  ["food","substance eaten for nourishment"],
  ["work","activity involving effort or labor"],
  ["door","a movable barrier for an entrance"],
  ["room","an enclosed space within a building"],
  ["body","the physical structure of a person"],
  ["form","the shape or structure of something"],
  ["city","a large town or urban area"],
  ["town","a settlement smaller than a city"],
  ["land","solid ground or territory"],
  ["park","an open green area for recreation"],
  ["road","a paved path for vehicles"],
  ["path","a track or route"],
  ["tree","a tall woody plant with branches"],
  ["bird","a feathered winged animal"],
  ["fish","a cold-blooded aquatic animal"],
  ["book","a written or printed work"],
  ["word","a single unit of language"],
  ["song","a musical composition with lyrics"],
  ["game","an activity done for entertainment"],
  ["fire","the rapid oxidation producing heat and light"],
  ["rain","water falling from clouds"],
  ["wind","moving air"],
  ["snow","frozen water crystals falling from the sky"],
  ["star","a luminous ball of gas in space"],
  ["moon","the natural satellite of the earth"],
  ["lake","a large inland body of water"],
  ["hill","a raised area of land"],
  ["rock","a solid mineral material"],
  ["sand","fine grains of mineral material"],
  ["gold","a precious yellow metal"],
  ["iron","a common strong metal"],
  ["milk","a white liquid produced by mammals"],
  ["salt","a mineral used to season food"],
  ["soap","a cleansing agent"],
  ["rose","a flowering plant with thorns"],
  ["leaf","a flat green part of a plant"],
  ["seed","a plant embryo"],
  ["root","the underground part of a plant"],
  ["stem","the main stalk of a plant"],
  ["wing","a limb used for flying"],
  ["tail","the rear appendage of an animal"],
  ["beak","the bill of a bird"],
  ["claw","a sharp curved nail"],
  ["nest","a structure where birds lay eggs"],
  ["cage","an enclosure for animals"],
  ["rope","a thick twisted cord"],
  ["nail","a small metal spike"],
  ["wire","a thin metal thread"],
  ["pipe","a hollow tube"],
  ["wall","a vertical structure"],
  ["roof","the top covering of a building"],
  ["step","a single stair or footfall"],
  ["desk","a writing table"],
  ["lamp","a light-giving device"],
  ["bell","a hollow metal object that rings"],
  ["ring","a circular band"],
  ["ball","a round object used in sports"],
  ["boat","a small watercraft"],
  ["ship","a large watercraft"],
  ["cart","a wheeled vehicle"],
  ["bike","a two-wheeled vehicle"],
  ["drum","a percussion instrument"],
  ["horn","a wind instrument"],
  ["harp","a stringed instrument"],
  ["flute","a woodwind instrument"],
  ["piano","a musical keyboard instrument"],
  ["apple","a red or green fruit"],
  ["grape","a small fruit in clusters"],
  ["lemon","a yellow citrus fruit"],
  ["mango","a tropical fruit"],
  ["peach","a soft fuzzy fruit"],
  ["plum","a small purple fruit"],
  ["pear","a sweet juicy fruit"],
  ["lime","a small green citrus fruit"],
  ["corn","a yellow grain vegetable"],
  ["bean","a seed pod vegetable"],
  ["peas","small round green vegetables"],
  ["mint","an aromatic herb"],
  ["sage","a culinary herb"],
  ["rice","a grain staple food"],
  ["meat","animal flesh used as food"],
  ["beef","meat from cattle"],
  ["pork","meat from pigs"],
  ["lamb","meat from young sheep"],
  ["cake","a sweet baked dessert"],
  ["bread","a baked food from flour"],
  ["soup","a liquid food dish"],
  ["stew","a slow-cooked dish"],
  ["taco","a Mexican food item"],
  ["chip","a thin crispy snack"],
  ["blue","the color of the sky"],
  ["pink","a light red color"],
  ["gray","a neutral color between black and white"],
  ["dark","having little light"],
  ["soft","not hard or firm"],
  ["hard","solid and firm"],
  ["warm","moderately hot"],
  ["cool","moderately cold"],
  ["fast","moving quickly"],
  ["slow","not moving quickly"],
  ["tall","of great height"],
  ["wide","of great width"],
  ["deep","extending far down"],
  ["thin","having little thickness"],
  ["flat","having a level surface"],
  ["round","having a circular shape"],
  ["long","having great length"],
  ["near","close in distance"],
  ["safe","free from danger"],
  ["wild","living in nature"],
  ["free","not restricted"],
  ["open","not closed"],
  ["full","containing as much as possible"],
  ["kind","having a friendly nature"],
  ["bold","showing courage"],
  ["calm","free from agitation"],
  ["dear","regarded with affection"],
  ["glad","feeling happy"],
  ["huge","very large"],
  ["idle","not working"],
  ["keen","eager and enthusiastic"],
  ["lazy","unwilling to work"],
  ["mild","not extreme"],
  ["neat","tidy and orderly"],
  ["pale","light in color"],
  ["pure","not mixed"],
  ["rare","not common"],
  ["rich","having great wealth"],
  ["rude","not polite"],
  ["rush","to move fast"],
  ["tame","not wild"],
  ["vain","having too much pride"],
  ["vast","very large in area"],
  ["walk","to move on foot"],
  ["jump","to leap into the air"],
  ["swim","to move through water"],
  ["sing","to make musical sounds"],
  ["play","to engage in fun activity"],
  ["read","to look at and understand text"],
  ["write","to form letters or words"],
  ["draw","to make a picture"],
  ["cook","to prepare food with heat"],
  ["bake","to cook in an oven"],
  ["wash","to clean with water"],
  ["build","to construct something"],
  ["grow","to increase in size"],
  ["close","to shut"],
  ["start","to begin"],
  ["stop","to cease"],
  ["push","to apply force away from oneself"],
  ["pull","to draw toward oneself"],
  ["lift","to raise upward"],
  ["drop","to let fall"],
  ["hold","to keep in one's hand"],
  ["send","to cause to go"],
  ["find","to discover"],
  ["keep","to retain"],
  ["give","to transfer to another"],
  ["take","to receive"],
  ["make","to create"],
  ["help","to assist"],
  ["hope","to wish for"],
  ["love","a deep affection"],
  ["fear","an unpleasant emotion from danger"],
  ["hate","strong dislike"],
  ["care","to feel concern"],
  ["wait","to stay until something happens"],
  ["call","to speak loudly or phone"],
  ["talk","to speak"],
  ["hear","to perceive sound"],
  ["look","to direct eyes toward"],
  ["feel","to experience a sensation"],
  ["seem","to appear to be"],
  ["know","to be aware of"],
  ["think","to use one's mind"],
  ["want","to desire"],
  ["need","to require"],
  ["like","to find pleasant"],
  ["live","to be alive"],
  ["move","to change position"],
  ["turn","to rotate"],
  ["fall","to drop down"],
  ["stand","to be upright"],
  ["bring","to carry here"],
  ["show","to display"],
  ["tell","to communicate information"],
  ["meet","to come together"],
  ["leave","to go away from"],
  ["learn","to gain knowledge"],
  ["teach","to give knowledge"],
  ["study","to apply the mind to learning"],
  ["smile","a happy facial expression"],
  ["laugh","to express amusement"],
  ["sleep","a state of rest"],
  ["dream","images during sleep"],
  ["speak","to talk"],
  ["climb","to go up"],
  ["dance","to move rhythmically"],
  ["fight","to engage in combat"],
  ["catch","to capture or seize"],
  ["throw","to propel through the air"],
  ["break","to separate into pieces"],
  ["shake","to move back and forth"],
  ["touch","to make contact"],
  ["taste","to sense flavor"],
  ["smell","to sense odor"],
  ["watch","to observe"],
  ["check","to examine"],
  ["count","to enumerate"],
  ["cover","to place over"],
  ["enter","to go into"],
  ["exist","to have being"],
  ["enjoy","to take pleasure in"],
  ["avoid","to keep away from"],
  ["allow","to permit"],
  ["offer","to present for acceptance"],
  ["reach","to stretch out to"],
  ["serve","to work for"],
  ["share","to divide among others"],
  ["spend","to use time or money"],
  ["solve","to find an answer"],
  ["store","to keep for future use"],
  ["track","to follow the trail of"],
  ["train","to teach skills"],
  ["trust","to believe in"],
  ["visit","to go to see"],
  ["waste","to use carelessly"],
  ["world","the earth and all life"],
  ["house","a building for living in"],
  ["water","a clear liquid essential for life"],
  ["music","organized sound"],
  ["night","the period of darkness"],
  ["light","electromagnetic radiation"],
  ["heart","the organ that pumps blood"],
  ["earth","the planet we live on"],
  ["place","a particular location"],
  ["thing","an object"],
  ["point","a specific location"],
  ["group","a collection of things"],
  ["state","a condition or territory"],
  ["whole","complete and entire"],
  ["level","a position on a scale"],
  ["power","the ability to do something"],
  ["money","a medium of exchange"],
  ["story","an account of events"],
  ["class","a group of students"],
  ["paper","a thin material for writing"],
  ["north","the direction toward the North Pole"],
  ["south","the direction toward the South Pole"],
  ["young","not old"],
  ["large","of great size"],
  ["small","of little size"],
  ["human","relating to people"],
  ["local","relating to a nearby area"],
  ["early","before the expected time"],
  ["never","not at any time"],
  ["often","many times"],
  ["again","one more time"],
  ["maybe","perhaps"],
  ["quite","to a considerable degree"],
  ["every","each one"],
  ["above","at a higher level"],
  ["below","at a lower level"],
  ["after","following in time"],
  ["since","from a time in the past"],
  ["about","concerning"],
  ["horse","a large domesticated animal"],
  ["camel","a desert animal with humps"],
  ["tiger","a large striped wild cat"],
  ["eagle","a large bird of prey"],
  ["shark","a large predatory fish"],
  ["whale","a very large sea mammal"],
  ["snake","a legless reptile"],
  ["frog","a small amphibian"],
  ["crane","a large wading bird"],
  ["panda","a black and white bear"],
  ["koala","an Australian marsupial"],
  ["zebra","a striped African animal"],
  ["moose","a large deer-like animal"],
  ["otter","a semi-aquatic mammal"],
  ["river","a large natural stream"],
  ["ocean","a large body of salt water"],
  ["beach","sandy shore by the sea"],
  ["cloud","a mass of water vapor"],
  ["storm","a violent weather event"],
  ["frost","ice crystals on surfaces"],
  ["flame","burning fire light"],
  ["smoke","gas from burning material"],
  ["shade","darkness from blocked light"],
  ["field","open land for farming"],
  ["forest","a large area of trees"],
  ["valley","low land between hills"],
  ["bridge","a structure over water"],
  ["tower","a tall narrow structure"],
  ["castle","a large fortified building"],
  ["church","a place of worship"],
  ["school","a place for learning"],
  ["hotel","a place to stay"],
  ["market","a place to buy and sell"],
  ["garden","a place to grow plants"],
  ["prison","a place to hold criminals"],
  ["island","land surrounded by water"],
  ["planet","a large body orbiting a star"],
  ["spring","the season after winter"],
  ["summer","the warmest season"],
  ["autumn","the season before winter"],
  ["winter","the coldest season"],
  ["morning","the early part of the day"],
  ["evening","the late part of the day"],
  ["minute","sixty seconds"],
  ["second","one sixtieth of a minute"],
  ["mother","a female parent"],
  ["father","a male parent"],
  ["sister","a female sibling"],
  ["brother","a male sibling"],
  ["friend","a person you like"],
  ["doctor","a medical professional"],
  ["nurse","a healthcare worker"],
  ["artist","a person who creates art"],
  ["farmer","a person who farms"],
  ["hunter","a person who hunts"],
  ["leader","a person who leads"],
  ["player","a person who plays"],
  ["singer","a person who sings"],
  ["writer","a person who writes"],
  ["dancer","a person who dances"],
  ["winner","a person who wins"],
  ["master","a person with great skill"],
  ["helper","a person who helps"],
  ["worker","a person who works"],
  ["driver","a person who drives"],
  ["baker","a person who bakes"],
  ["buyer","a person who buys"],
  ["seller","a person who sells"],
  ["owner","a person who owns"],
  ["trader","a person who trades"],
  ["sailor","a person who sails"],
  ["keeper","a person who keeps"],
  ["runner","a person who runs"],
  ["jumper","a person who jumps"],
  ["caller","a person who calls"],
  ["reader","a person who reads"],
  ["faster","more quick"],
  ["harder","more difficult"],
  ["louder","more loud"],
  ["longer","greater in length"],
  ["higher","greater in height"],
  ["deeper","greater in depth"],
  ["wider","greater in width"],
  ["closer","nearer in distance"],
  ["older","greater in age"],
  ["newer","more recent"],
  ["smart","having good judgment"],
  ["brave","showing courage"],
  ["angry","feeling strong displeasure"],
  ["happy","feeling pleasure"],
  ["lucky","having good fortune"],
  ["funny","causing amusement"],
  ["crazy","mentally unstable"],
  ["dizzy","feeling unsteady"],
  ["messy","untidy and disorganized"],
  ["nasty","unpleasant"],
  ["noisy","making a lot of sound"],
  ["shiny","reflecting light brightly"],
  ["spicy","having a strong flavor"],
  ["sunny","bright with sunlight"],
  ["windy","with much wind"],
  ["rainy","with much rain"],
  ["foggy","filled with fog"],
  ["muddy","covered with mud"],
  ["dusty","covered with dust"],
  ["rusty","covered with rust"],
  ["bumpy","having many bumps"],
  ["curly","having curls"],
  ["wavy","having waves"],
  ["fluffy","light and soft"],
  ["cheek","the side of the face"],
  ["elbow","the joint in the middle of the arm"],
  ["ankle","the joint between foot and leg"],
  ["thumb","the short thick finger"],
  ["skull","the bony framework of the head"],
  ["spine","the backbone"],
  ["liver","a vital organ"],
  ["kidney","an organ that filters blood"],
  ["nerve","a fiber that transmits impulses"],
  ["blood","the red fluid in the body"],
  ["brain","the organ of thought"],
  ["tooth","a hard structure in the mouth"],
  ["tongue","the organ of taste"],
  ["chest","the front of the torso"],
  ["belly","the abdomen"],
  ["crown","the top of the head"],
  ["brow","the forehead"],
  ["chin","the lower part of the face"],
  ["palm","the inner surface of the hand"],
  ["wrist","the joint between hand and arm"],
  ["knee","the joint in the middle of the leg"],
  ["blade","a flat cutting edge"],
  ["arrow","a projectile shot from a bow"],
  ["sword","a long bladed weapon"],
  ["spear","a long pointed weapon"],
  ["shield","a protective device"],
  ["armor","protective covering"],
  ["fence","a barrier around an area"],
  ["hedge","a row of bushes as a barrier"],
  ["ditch","a narrow channel dug in the ground"],
  ["creek","a small stream"],
  ["brook","a small stream"],
  ["swamp","a wetland area"],
  ["marsh","a wetland with grasses"],
  ["plain","flat open land"],
  ["slope","a surface at an angle"],
  ["cliff","a steep rock face"],
  ["cave","a hollow in the earth"],
  ["mine","a place to extract minerals"],
  ["port","a harbor for ships"],
  ["dock","a platform at a harbor"],
  ["canal","a man-made waterway"],
  ["drain","a channel for water removal"],
  ["pump","a device to move fluids"],
  ["valve","a device to control flow"],
  ["gauge","a measuring instrument"],
  ["lever","a rigid bar for lifting"],
  ["wheel","a circular rotating object"],
  ["axle","a shaft on which wheels turn"],
  ["chain","a series of linked rings"],
  ["cable","a thick wire or rope"],
  ["knot","a fastening made by tying"],
  ["loop","a curved shape"],
  ["hook","a curved device for catching"],
  ["latch","a fastening device"],
  ["hinge","a joint that allows rotation"],
  ["screw","a threaded fastener"],
  ["bolt","a metal pin with a thread"],
  ["rivet","a metal fastener"],
  ["clamp","a device for gripping"],
  ["wrench","a tool for turning bolts"],
  ["drill","a tool for making holes"],
  ["brush","a tool with bristles"],
  ["broom","a sweeping tool"],
  ["cloth","woven fabric"],
  ["linen","a fabric made from flax"],
  ["wool","fiber from sheep"],
  ["silk","a fine natural fiber"],
  ["nylon","a synthetic fabric"],
  ["denim","a sturdy cotton fabric"],
  ["print","a mark made by pressing"],
  ["stamp","to press a mark onto"],
  ["brand","a mark identifying a product"],
  ["label","a tag with information"],
  ["badge","an identifying emblem"],
  ["token","a small object representing value"],
  ["medal","an award given for achievement"],
  ["prize","a reward for winning"],
  ["award","something given in recognition"],
  ["grant","money given for a purpose"],
  ["bonus","extra pay or reward"],
  ["raise","an increase in pay"],
  ["limit","a maximum or boundary"],
  ["quota","a fixed share or amount"],
  ["ratio","a relationship between quantities"],
  ["scale","a range of values"],
  ["range","the extent of variation"],
  ["scope","the extent of coverage"],
  ["depth","the distance downward"],
  ["width","the measurement across"],
  ["speed","the rate of movement"],
  ["angle","the space between two lines"],
  ["curve","a smoothly bending line"],
  ["plane","a flat surface"],
  ["solid","a firm three-dimensional object"],
  ["shape","the outer form of an object"],
  ["model","a representation of something"],
  ["image","a picture or likeness"],
  ["photo","a picture taken by a camera"],
  ["frame","a border or structure"],
  ["panel","a flat section of a surface"],
  ["plate","a flat dish for food"],
  ["bowl","a round deep dish"],
  ["glass","a container for drinking"],
  ["spoon","a utensil for eating liquids"],
  ["knife","a cutting utensil"],
  ["ladle","a large spoon for serving"],
  ["tongs","a gripping utensil"],
  ["whisk","a cooking utensil"],
  ["grater","a tool for shredding food"],
  ["sieve","a tool for straining"],
  ["timer","a device that measures time"],
  ["stove","a cooking appliance"],
  ["flask","a container for liquids"],
  ["vase","a decorative container for flowers"],
  ["shelf","a flat board for storage"],
  ["drawer","a sliding storage compartment"],
  ["closet","a small storage room"],
  ["cellar","an underground storage room"],
  ["attic","a space just below the roof"],
  ["porch","a covered entrance to a building"],
  ["lobby","an entrance hall"],
  ["hall","a corridor in a building"],
  ["stair","a step in a staircase"],
  ["ramp","a sloping surface"],
  ["ledge","a narrow horizontal surface"],
  ["sill","the bottom of a window frame"],
  ["pane","a sheet of glass in a window"],
  ["blind","a window covering"],
  ["mural","a painting on a wall"],
  ["sketch","a rough drawing"],
  ["draft","a preliminary version"],
  ["proof","evidence establishing a fact"],
  ["claim","an assertion of something"],
  ["blame","responsibility for a fault"],
  ["shame","a painful feeling of guilt"],
  ["pride","satisfaction in achievements"],
  ["greed","excessive desire for wealth"],
  ["envy","desire for others possessions"],
  ["anger","a strong feeling of displeasure"],
  ["grief","deep sorrow"],
  ["worry","a state of anxiety"],
  ["doubt","a feeling of uncertainty"],
  ["faith","complete trust or confidence"],
  ["peace","freedom from conflict"],
  ["mercy","compassion toward others"],
  ["grace","elegance and beauty of movement"],
  ["charm","the power to attract"],
  ["magic","mysterious power"],
  ["spell","a form of words with magic"],
  ["curse","a wish of harm on someone"],
  ["spirit","the non-physical part of a person"],
  ["ghost","the spirit of a dead person"],
  ["angel","a divine spiritual being"],
  ["demon","an evil spirit"],
  ["myth","a traditional story"],
  ["fable","a short story with a moral"],
  ["tale","a narrative or story"],
  ["poem","a literary composition in verse"],
  ["verse","writing arranged in lines"],
  ["rhyme","words with similar sounds"],
  ["rhythm","a regular pattern of sound"],
  ["theme","the main subject of a work"],
  ["topic","a subject of discussion"],
  ["issue","an important subject for debate"],
  ["event","something that happens"],
  ["scene","a place where something occurs"],
  ["stage","a platform for performance"],
  ["drama","a play or exciting event"],
  ["comedy","a humorous work"],
  ["horror","an intense feeling of fear"],
  ["action","the process of doing something"],
  ["effect","a result or outcome"],
  ["cause","a reason for something"],
  ["basis","the foundation of something"],
  ["logic","systematic reasoning"],
  ["fact","a thing known to be true"],
  ["data","facts and statistics"],
  ["input","data put into a system"],
  ["signal","a gesture conveying information"],
  ["noise","unwanted sound or data"],
  ["error","a mistake"],
  ["fault","a defect or mistake"],
  ["flaw","an imperfection"],
  ["crack","a line of breakage"],
  ["dent","a small depression"],
  ["mark","a visible trace"],
  ["stain","a discoloration"],
  ["spot","a small mark or area"],
  ["patch","a piece used to repair"],
  ["seam","a line where things are joined"],
  ["edge","the border of something"],
  ["border","a boundary between areas"],
  ["bound","a boundary or limit"],
  ["zone","an area with particular features"],
  ["region","a large area of land"],
  ["sector","a distinct part of something"],
  ["domain","an area of knowledge"],
  ["realm","a kingdom or field of activity"],
  ["space","an area that is empty"],
  ["base","the lowest part or foundation"],
  // 200 additional words
  ["acid","a corrosive chemical substance"],
  ["acre","a unit of land area"],
  ["aged","having lived for a long time"],
  ["aide","an assistant or helper"],
  ["airy","having fresh air or open space"],
  ["akin","similar or related to"],
  ["alga","a simple aquatic plant"],
  ["ally","a partner or supporter"],
  ["aloe","a succulent plant with healing gel"],
  ["also","in addition or furthermore"],
  ["alto","a low female singing voice"],
  ["amen","a word said at the end of a prayer"],
  ["amid","surrounded by or in the middle of"],
  ["arch","a curved structure spanning an opening"],
  ["area","a particular region or space"],
  ["army","a large organized military force"],
  ["ashy","covered in or resembling ash"],
  ["atop","on the top of something"],
  ["aunt","the sister of a parent"],
  ["auto","a self-propelled vehicle"],
  ["avid","having a keen interest in something"],
  ["awed","filled with wonder and respect"],
  ["ache","a dull continuous pain"],
  ["acre","a unit of land equal to 4840 square yards"],
  ["bald","having no hair on the head"],
  ["balm","a soothing ointment or lotion"],
  ["band","a flat strip or group of musicians"],
  ["bang","a sudden loud noise"],
  ["bank","a financial institution"],
  ["barn","a large farm building"],
  ["base","the bottom or foundation of something"],
  ["bash","to hit hard or a party"],
  ["bath","a washing of the body"],
  ["beam","a ray of light or a structural timber"],
  ["beat","to strike repeatedly"],
  ["beef","meat from cattle"],
  ["been","past participle of be"],
  ["beer","an alcoholic drink made from grain"],
  ["beet","a root vegetable with red flesh"],
  ["best","of the highest quality"],
  ["bite","to cut with teeth"],
  ["blob","a small rounded mass"],
  ["bloc","a group of countries or people allied"],
  ["blow","to move air with force"],
  ["blue","the color of a clear sky"],
  ["boar","a male pig"],
  ["bode","to be an omen of something"],
  ["bone","a rigid tissue forming the skeleton"],
  ["boom","a loud deep sound or rapid growth"],
  ["boot","a sturdy covering for the foot"],
  ["bore","to make a hole or to be tedious"],
  ["born","having come into existence"],
  ["boss","a person in charge"],
  ["both","two considered together"],
  ["brew","to make beer or coffee"],
  ["bull","an adult male bovine animal"],
  ["bump","a small raised area or collision"],
  ["burn","to be on fire or cause injury by heat"],
  ["burp","to expel gas from the stomach"],
  ["busy","actively engaged in work"],
  ["buzz","a low humming sound"],
  ["cape","a sleeveless cloak or piece of land"],
  ["card","a flat piece of stiff paper"],
  ["carp","a freshwater fish or to complain"],
  ["cash","money in coins or notes"],
  ["cast","to throw or assign roles"],
  ["ceil","to furnish with a ceiling"],
  ["cell","a small room or basic unit of life"],
  ["cent","a monetary unit"],
  ["chad","small piece of paper punched out"],
  ["chap","a man or to crack the skin"],
  ["char","to scorch or burn"],
  ["chat","to talk in a friendly way"],
  ["chew","to crush food with teeth"],
  ["chop","to cut with a sharp blow"],
  ["cite","to quote as evidence"],
  ["clad","wearing certain clothes"],
  ["clap","to strike hands together"],
  ["clay","a stiff earthy material"],
  ["clip","to cut or fasten"],
  ["clod","a lump of earth"],
  ["clog","to block or a wooden shoe"],
  ["clot","a thickened mass of liquid"],
  ["clue","a piece of evidence"],
  ["coal","a black solid fuel"],
  ["coat","an outer garment"],
  ["coil","a series of loops"],
  ["coin","a metal disc used as money"],
  ["cola","a sweet carbonated drink"],
  ["cold","low in temperature"],
  ["colt","a young male horse"],
  ["comb","a toothed device for hair"],
  ["cone","a three-dimensional shape"],
  ["cope","to deal with difficulties"],
  ["cord","a length of string"],
  ["core","the central part of something"],
  ["cork","a buoyant material from bark"],
  ["cost","the price of something"],
  ["cozy","comfortable and warm"],
  ["crew","a group working together"],
  ["crop","a cultivated plant or to cut short"],
  ["crow","a black bird or to boast"],
  ["cube","a three-dimensional square shape"],
  ["curb","a stone edge of a path"],
  ["cute","attractive in a pretty way"],
  ["dame","an older woman"],
  ["damp","slightly wet"],
  ["dare","to have the courage to do something"],
  ["dart","a small pointed missile"],
  ["dash","to move quickly or a small mark"],
  ["dawn","the first light of day"],
  ["daze","a state of confusion"],
  ["dead","no longer alive"],
  ["deaf","unable to hear"],
  ["deal","an agreement or to distribute"],
  ["dean","a head of a faculty"],
  ["debt","money owed to another"],
  ["deck","a flat surface or a set of cards"],
  ["deed","an action or a legal document"],
  ["deem","to regard or consider"],
  ["deny","to refuse or contradict"],
  ["desk","a writing table"],
  ["dew","water droplets from condensation"],
  ["dice","small cubes used in games"],
  ["diet","food habitually eaten"],
  ["dime","a ten-cent coin"],
  ["dine","to eat dinner"],
  ["dire","extremely serious"],
  ["dirt","loose soil or filth"],
  ["disc","a flat circular object"],
  ["dish","a container for food"],
  ["disk","a flat circular storage device"],
  ["dive","to plunge into water headfirst"],
  ["dome","a rounded vault forming a roof"],
  ["done","having finished something"],
  ["dose","a measured amount of medicine"],
  ["dote","to be excessively fond of"],
  ["dove","a white bird symbolizing peace"],
  ["down","in a lower position"],
  ["doze","to sleep lightly"],
  ["drab","dull or lacking brightness"],
  ["drag","to pull with effort"],
  ["drip","to fall in small drops"],
  ["drop","a small quantity of liquid"],
  ["drug","a medicine or illegal substance"],
  ["dryer","a machine that removes moisture"],
  ["dude","an informal term for a person"],
  ["dull","lacking brightness or interest"],
  ["dumb","unable to speak or stupid"],
  ["dune","a hill of sand"],
  ["dusk","the time just after sunset"],
  ["dust","fine dry powder"],
  ["duty","a moral or legal obligation"],
  ["dwell","to live in a place"],
  ["dye","a substance used to change color"],
  ["each","every individual one"],
  ["earn","to receive as payment for work"],
  ["east","the direction of sunrise"],
  ["easy","requiring little effort"],
  ["echo","a sound reflected back"],
  ["edit","to prepare text for publication"],
  ["emit","to give out or send forth"],
  ["epic","heroic or impressively large"],
  ["even","flat and smooth or divisible by two"],
  ["evil","profoundly immoral"],
  ["exam","a formal test of knowledge"],
  ["exit","a way out or to leave"],
  ["expo","a large public exhibition"],
  ["faint","barely perceptible or to lose consciousness"],
  ["fair","treating people equally"],
  ["fake","not genuine"],
  ["fame","being known by many people"],
  ["fare","the price paid for travel"],
  ["farm","an area of land for growing crops"],
  ["fate","events outside control"],
  ["fawn","a young deer or light brown color"],
  ["faze","to disturb the composure of"],
  ["feat","an achievement requiring skill"],
  ["feed","to give food to"],
  ["feet","plural of foot"],
  ["felt","past tense of feel"],
  ["fend","to defend or look after oneself"],
  ["fern","a flowerless plant with fronds"],
  ["fist","a tightly closed hand"],
  ["five","the number after four"],
  ["fizz","to produce bubbles"],
  ["flag","a piece of cloth used as a symbol"],
  ["flap","to move up and down"],
  ["flaw","an imperfection in something"],
  ["flea","a small jumping insect"],
  ["flew","past tense of fly"],
  ["flex","to bend a limb"],
  ["flip","to turn over quickly"],
  ["flit","to move swiftly and lightly"],
  ["flow","to move smoothly"],
  ["foam","a mass of bubbles"],
  ["foe","an enemy"],
  ["fold","to bend over itself"],
  ["folk","people in general"],
  ["fond","having an affection for"],
  ["font","a set of characters in one style"],
  ["ford","a shallow crossing in a river"],
  ["fore","at or near the front"],
  ["fork","a utensil with prongs"],
  ["fort","a fortified building"],
  ["foul","offensive or against the rules"],
  ["four","the number after three"],
  ["fowl","a domestic bird"],
  ["fray","to unravel at the edges"],
  ["fret","to be constantly worried"],
  ["fuel","material burned to produce energy"],
  ["fume","to emit gas or smoke"],
  ["fund","a sum of money saved"],
  ["funk","a state of depression or music style"],
  ["fuse","a safety device or to join together"],
  ["fuzz","a fluffy mass or indistinctness"],
  ["gale","a very strong wind"],
  ["gall","bold behavior or bile"],
  ["gash","a long deep cut"],
  ["gate","a movable barrier"],
  ["gaze","to look steadily"],
  ["gear","equipment or a toothed wheel"],
  ["germ","a microorganism causing disease"],
  ["gist","the main point of something"],
  ["give","to freely transfer something"],
  ["glee","great delight"],
  ["glen","a narrow valley"],
  ["glob","a lump of a semi-liquid substance"],
  ["glow","to emit a steady light"],
  ["glue","a sticky substance"],
  ["gnat","a small biting insect"],
  ["gnaw","to bite persistently"],
  ["goad","to provoke or stimulate"],
  ["goal","an aim or objective"],
  ["goat","a horned ruminant animal"],
  ["gore","blood from a wound"],
  ["gown","a long dress or robe"],
  ["grab","to take hold suddenly"],
  ["gram","a unit of mass"],
  ["grin","a broad smile"],
  ["grip","to hold firmly"],
  ["grit","small particles of sand"],
  ["groom","to clean and maintain"],
  ["gust","a sudden strong wind"],
  ["guts","courage or intestines"],
  ["hack","to cut roughly"],
  ["hale","strong and healthy"],
  ["halt","to stop moving"],
  ["haze","a slight obscuration in the air"],
  ["head","the top part of the body"],
  ["heal","to become healthy again"],
  ["heap","a pile of things"],
  ["heat","the quality of being hot"],
  ["heed","to pay attention to"],
  ["helm","a steering device for a ship"],
  ["herb","a plant used in cooking"],
  ["herd","a large group of animals"],
  ["hewn","cut or shaped with an axe"],
  ["hide","to put out of sight"],
  ["hire","to employ someone"],
  ["hiss","to make a sharp sibilant sound"],
  ["hoax","a deceptive trick"],
  ["hoop","a circular band"],
  ["hose","a flexible pipe for water"],
  ["host","a person who receives guests"],
  ["howl","a long loud cry"],
  ["hull","the body of a ship"],
  ["hump","a rounded protuberance"],
  ["hung","past tense of hang"],
  ["hunk","a large piece of something"],
  ["hunt","to pursue animals for food"],
  ["hurl","to throw with great force"],
  ["hymn","a religious song of praise"],
  ["inch","a unit of length"],
  ["inky","covered with or dark as ink"],
  ["into","expressing entry or direction"],
  ["iris","a flowering plant or part of the eye"],
  ["isle","a small island"],
  ["itch","an irritating sensation"],
  ["ivory","a hard white material from tusks"],
  ["jade","a green gemstone"],
  ["jail","a place of confinement"],
  ["jeer","to make rude remarks"],
  ["jolt","a sudden movement"],
  ["keen","sharp or eager"],
  ["kelp","a large brown seaweed"],
  ["kern","the central part of a typeface"],
  ["kick","to strike with the foot"],
  ["king","a male ruler of a country"],
  ["kite","a light frame flown in the wind"],
  ["kiwi","a flightless bird or a green fruit"],
  ["lace","a delicate fabric or to fasten"],
  ["lack","to be without something"],
  ["lame","unable to walk or unconvincing"],
  ["lank","long and limp"],
  ["lard","pig fat used in cooking"],
  ["lark","a songbird or a playful adventure"],
  ["lash","to strike or fasten tightly"],
  ["last","coming after all others"],
  ["lava","molten rock from a volcano"],
  ["lawn","an area of short mown grass"],
  ["lean","to incline or thin"],
  ["leer","to look in a lascivious way"],
  ["lend","to give temporarily"],
  ["lens","a curved piece of glass"],
  ["limp","to walk unevenly"],
  ["lint","short fine fibers from fabric"],
  ["lion","a large wild cat"],
  ["lisp","to pronounce s as th"],
  ["list","a series of items"],
  ["loft","a room or space under the roof"],
  ["loom","to appear large or threatening"],
  ["lore","a body of traditional knowledge"],
  ["lorn","lonely or abandoned"],
  ["loss","the fact of losing something"],
  ["lost","unable to find the way"],
  ["lump","a hard or compact mass"],
  ["lung","an organ used for breathing"],
  ["lurk","to be hidden or wait in ambush"],
  ["lush","growing luxuriantly"],
  ["lust","a strong desire"],
  ["lynx","a wild cat with tufted ears"],
  ["lyre","an ancient stringed instrument"]
];

// Filter: only alphabetic words with length 4-8, and at least 3 chars (to allow hiding 1 non-first/last)
const VALID_WORDS = WORDS.filter(([w]) => /^[a-zA-Z]{4,8}$/.test(w));

let currentWord = "";
let currentMeaning = "";
let hiddenIndex = -1;
let correctAnswer = "";
let hintUsed = false;
let answered = false;
let score = 0;
let correctCount = 0;
let totalCount = 0;
let usedLetters = {}; // letter -> 'correct'|'wrong'

function pickWord() {
  const idx = Math.floor(Math.random() * VALID_WORDS.length);
  return VALID_WORDS[idx];
}

function chooseHiddenIndex(word) {
  // Hide any index except first and last
  const candidates = [];
  for (let i = 1; i < word.length - 1; i++) candidates.push(i);
  if (candidates.length === 0) return 1; // fallback for very short
  return candidates[Math.floor(Math.random() * candidates.length)];
}

function ordinalSuffix(n) {
  const s = ["th","st","nd","rd"];
  const v = n % 100;
  return n + (s[(v-20)%10] || s[v] || s[0]);
}

function initQuestion() {
  hintUsed = false;
  answered = false;
  usedLetters = {};

  const [word, meaning] = pickWord();
  currentWord = word.toLowerCase();
  currentMeaning = meaning;
  hiddenIndex = chooseHiddenIndex(currentWord);
  correctAnswer = currentWord[hiddenIndex];

  // UI
  document.getElementById("meaning-box").textContent = meaning.charAt(0).toUpperCase() + meaning.slice(1);
  renderWordDisplay();
  document.getElementById("position-hint").textContent =
    `第 ${hiddenIndex + 1} 個字母（共 ${currentWord.length} 個字母）`;
  document.getElementById("letter-input").value = "";
  document.getElementById("letter-input").disabled = false;
  document.getElementById("letter-input").focus();
  document.getElementById("result-msg").textContent = "";
  document.getElementById("result-msg").className = "result-msg";
  document.getElementById("btn-confirm").disabled = false;
  document.getElementById("btn-hint").disabled = false;
  document.getElementById("btn-next").style.display = "none";

  renderKeyboard();
}

function renderWordDisplay() {
  const display = document.getElementById("word-display");
  display.innerHTML = "";
  display.classList.remove("shake-anim");
  for (let i = 0; i < currentWord.length; i++) {
    const box = document.createElement("div");
    box.classList.add("letter-box");
    box.id = "lb-" + i;
    if (i === hiddenIndex) {
      box.classList.add("blank");
      const qm = document.createElement("span");
      qm.classList.add("question-mark");
      qm.textContent = "?";
      box.appendChild(qm);
    } else {
      box.textContent = currentWord[i].toUpperCase();
    }
    display.appendChild(box);
  }
}

function renderKeyboard() {
  const rows = [
    ["q","w","e","r","t","y","u","i","o","p"],
    ["a","s","d","f","g","h","j","k","l"],
    ["z","x","c","v","b","n","m"]
  ];
  const kb = document.getElementById("keyboard");
  kb.innerHTML = "";
  rows.forEach(row => {
    const rowDiv = document.createElement("div");
    rowDiv.classList.add("kb-row");
    row.forEach(letter => {
      const key = document.createElement("div");
      key.classList.add("kb-key");
      key.id = "kb-" + letter;
      key.textContent = letter.toUpperCase();
      key.addEventListener("click", () => onKeyClick(letter));
      rowDiv.appendChild(key);
    });
    kb.appendChild(rowDiv);
  });
}

function onKeyClick(letter) {
  if (answered) return;
  const input = document.getElementById("letter-input");
  input.value = letter.toUpperCase();
  input.focus();
}

function markKey(letter, result) {
  const key = document.getElementById("kb-" + letter.toLowerCase());
  if (!key) return;
  key.classList.remove("kb-correct", "kb-wrong");
  key.classList.add(result === "correct" ? "kb-correct" : "kb-wrong");
}

function submitAnswer() {
  if (answered) return;
  const input = document.getElementById("letter-input");
  const guess = input.value.trim().toLowerCase();
  if (!guess || !/^[a-z]$/.test(guess)) {
    input.value = "";
    input.focus();
    return;
  }

  if (guess === correctAnswer) {
    // Correct
    answered = true;
    correctCount++;
    totalCount++;
    if (!hintUsed) score++;
    updateScore();

    // Reveal letter in box
    const blankBox = document.getElementById("lb-" + hiddenIndex);
    blankBox.classList.remove("blank");
    blankBox.innerHTML = currentWord[hiddenIndex].toUpperCase();
    blankBox.classList.add("correct-anim");

    markKey(guess, "correct");

    const msg = document.getElementById("result-msg");
    msg.textContent = hintUsed ? "答對了！（使用提示，不加分）" : "答對了！+1 分";
    msg.className = "result-msg correct";

    document.getElementById("btn-confirm").disabled = true;
    document.getElementById("btn-hint").disabled = true;
    document.getElementById("btn-next").style.display = "inline-block";
    document.getElementById("letter-input").disabled = true;

  } else {
    // Wrong
    totalCount++;
    updateScore();

    markKey(guess, "wrong");

    // Shake the word display
    const display = document.getElementById("word-display");
    display.classList.remove("shake-anim");
    void display.offsetWidth; // reflow
    display.classList.add("shake-anim");

    // Flash the blank box red
    const blankBox = document.getElementById("lb-" + hiddenIndex);
    blankBox.classList.remove("wrong-flash");
    void blankBox.offsetWidth;
    blankBox.classList.add("wrong-flash");
    setTimeout(() => blankBox.classList.remove("wrong-flash"), 400);

    const msg = document.getElementById("result-msg");
    msg.textContent = "答錯了，再試一次！";
    msg.className = "result-msg wrong";

    input.value = "";
    input.focus();
  }
}

function useHint() {
  if (answered || hintUsed) return;
  hintUsed = true;
  document.getElementById("btn-hint").disabled = true;

  const msg = document.getElementById("result-msg");
  msg.textContent = `提示：答案是「${correctAnswer.toUpperCase()}」（扣1分）`;
  msg.className = "result-msg hint";

  score = Math.max(0, score - 1);
  updateScore();

  // Pre-fill input
  const input = document.getElementById("letter-input");
  input.value = correctAnswer.toUpperCase();
  input.focus();
}

function nextQuestion() {
  initQuestion();
}

function updateScore() {
  document.getElementById("score-val").textContent = score;
  document.getElementById("correct-val").textContent = correctCount;
  document.getElementById("total-val").textContent = totalCount;
}

// Enter key handler
document.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    if (!answered) {
      submitAnswer();
    } else {
      nextQuestion();
    }
  }
});

// Redirect keyboard typing to input
document.addEventListener("keydown", (e) => {
  if (answered) return;
  const input = document.getElementById("letter-input");
  if (document.activeElement !== input && /^[a-zA-Z]$/.test(e.key)) {
    input.focus();
  }
});

// Start
initQuestion();
</script>
</body>
</html>
